function setCompareItemCheckboxListener(){$(".js-compare-checkbox").on("change",function(e){var $this=$(e.target);var checked=$this.is(":checked")})}
function setCompareLinkListener(){$(".js-compare-link").on("click",function(e){e.preventDefault();var $this=$(e.target);var sku=$this.data("sku");var model=getSelectedModel();if(model.sku.toLowerCase()!==sku.toLowerCase()){localStorage.setItem("selected_car",JSON.stringify({sku:sku}))}
window.location.href=$this.attr("href")})}
function showBannerIfNeeded(bannerId,sku,codes,url){if(!sku){return}
sku=sku.toLowerCase();for(var code in codes){url=(!url)?codes[code]:url;code=code.toLowerCase();if(sku===code||sku.indexOf(code+"_")!==-1){showBanner(bannerId,url);return}}
hideBanner(bannerId)}
function toggleBanners(model){showBannerIfNeeded("vline_banner",model.sku,vlineCodes);showBannerIfNeeded("wirelinq_banner",model.sku,wirelinqCodes,$("#wirelinq_banner").data("url"))}
function showProductForSavedModel(){var model=getSelectedModel();toggleBanners(model);var subtitle;if(model.sku){subtitle=getCarName();var suitableItems=[];var sku=model.sku.toLowerCase();for(var modifier in productCodes){$.each(productCodes[modifier],function(index,product){if(product.sku.toLowerCase()===sku||sku.indexOf(product.sku.toLowerCase()+"_")!==-1){product.modifier=modifier;suitableItems.push(product)}})}
showItems(suitableItems)}else{hideTable();subtitle="Please, select your car"}
$("#car_name__compare").text(subtitle)}
function hideTable(){$("#compare_container").hide()}
function showTable(){$("#compare_container").show()}
function setSelectCarListener(){var $button=$("#searchButton");if($button.length>0){$button.on("click",function(e){e.preventDefault();saveSelectedModel();showProductForSavedModel()})}}
function showItems(items){if(items.length>0){showTable();var $table=$("#compare-table");$table.html('');$.each(items,function(i){$table.append(renderItem(items[i]))});refreshSlider()}else{hideTable()}}
function renderTitle(item){return'<li class="align_center" style="height: 180px !important; padding-bottom: 14px !important;">'+'<span class="css3_grid_vertical_align_table">'+'<span class="css3_grid_vertical_align">'+'<span class="block-span" style="font-size:20px !important;">'+item.name+'</span>'+'<img src="'+item.img+'"'+'class="prodthumb"/>'+'<span class="block-span" style="text-transform:uppercase;font-size: 12px !important;padding-top: 5px;"> SKU: '+item.sku+item.modifier+'</span>'+'<div>'+'<span class="details_compare">'+'<a style="color: #fff !important;" href="'+item.url+'">'+'Details'+'</a>'+'</span>'+'</div>'+'</span>'+'</span>'+'</li>'}
function setDefaultFeatureValues(featureId,item){var text=features[featureId].default_text;var url=features[featureId].default_url;if(featuresDefault[item.modifier]&&featuresDefault[item.modifier][featureId]){text=featuresDefault[item.modifier][featureId].text?featuresDefault[item.modifier][featureId].text:text;url=featuresDefault[item.modifier][featureId].url?featuresDefault[item.modifier][featureId].url:url}
return{text:text,url:url}}
function renderItem(item){var title=renderTitle(item);var price=renderOption('Price','From $'+item.price);var itemFeatures=[];for(var featureId in features){var defaultFeature=setDefaultFeatureValues(featureId,item);var text=defaultFeature.text;var url=defaultFeature.url;if(item.hasOwnProperty(featureId)){if(item[featureId].text){text=item[featureId].text}
if(item[featureId].url){url=item[featureId].url}}
itemFeatures.push(renderOption(features[featureId].name,text,url))}
var $bottom=$(renderOption('',''));$bottom.html($(title).html()).attr("style","height: 180px !important;");return'<div class="column_1 column_1_responsive" style="width: 190px;"><ul>'+title+price+itemFeatures.join("")+$bottom.prop('outerHTML')+'</ul></div>'}
function renderOption(option,value,url){if(url){value='<a href="'+url+'">'+value+'<a/>'}
return'<li class="css3_grid_row_2 row_style_1 css3_grid_row_2_responsive align_center"><span class="css3_grid_vertical_align_table"><span class="css3_grid_vertical_align"><span><span class="css3_hidden_caption">'+option+'</span>'+value+'</span></span></span></li>'}
function saveSelectedModel(){localStorage.setItem("selected_car",JSON.stringify({brand:$("#carmake").val(),model:$("#carmodel").val(),year:$("#caryear").val(),sku:currentSKU}))}
function getSelectedModel(){var data=localStorage.getItem("selected_car");if(data){return JSON.parse(data)}
return{}}
function getCarName(){var model=getSelectedModel();var modelStr="";for(var i in model){if(i!=="sku")
modelStr+=model[i]+" "}
return modelStr}
$(document).ready(function(){if($("#compare_container").length>0){showProductForSavedModel();setSelectCarListener();cssCrutch()}
setCompareItemCheckboxListener();setCompareLinkListener()});function hideBanner(id){$("#"+id).hide(400)}
function showBanner(id,url){var $banner=$("#"+id);$banner.find(".js-banner-url").attr("href",url);$banner.show(400)}
$(document).ready(function(){$("img.crosss").click(function(){var id=$(this).closest(".compare_banner").attr("id");hideBanner(id)})});function cssCrutch(){if($(".css3_table_container").length>0){setInterval(function(){var $tableWrapper=$(".css3_grid_caroufredsel_wrapper");var $slider=$("#css3_grid_medicenter_green_sliding_prev");var sliderState=$slider.css("display");if(sliderState.toLowerCase()==="none"){$tableWrapper.css("border-right","none")}else{$tableWrapper.css("border-right","")}},300)}}
function refreshSlider(){$(".css3_grid_slider").trigger('updateSizes')}
$(document).ready(function(){$('tbody').scroll(function(e){$('thead').css("left",-$("tbody").scrollLeft());$('thead th:nth-child(1)').css("left",$("tbody").scrollLeft());$('tbody td:nth-child(1)').css("left",$("tbody").scrollLeft())})})